<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
      integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
      integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
      crossorigin=""
    ></script>
    <title>Frontend Mentor | IP Address Tracker</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
    <style>
      .attribution {
        font-size: 11px;
        text-align: center;
      }
      .attribution a {
        color: hsl(228, 45%, 44%);
      }
    </style>
  </head>
  <body>
    <header>
      <h1>IP Address Tracker</h1>
      <form action="/" method="post">
        <input
          class="input1"
          type="text"
          name="address"
          size="50"
          placeholder="Search for any IP address or domain"
          required
          pattern="\b(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b"
        />
        <input
          class="input2"
          type="image"
          src="../images/icon-arrow.svg"
          alt="submit"
        />
      </form>
    </header>
    <section class="details">
      <div class="ipAddress">
        <h5>IP ADDRESS</h5>
        <h2><%=result.ip%></h2>
      </div>
      <div class="location">
        <h5>LOCATION</h5>
        <h2><%=result.location.city%>,<%=result.location.region%></h2>
        <h2><%=result.location.postalCode%></h2>
      </div>
      <div class="timezone">
        <h5>TIMEZONE</h5>
        <h2>UTC <%=result.location.timezone%></h2>
      </div>
      <div class="isp">
        <h5>ISP</h5>
        <h2><%= result.isp %></h2>
      </div>
    </section>
    <section>
      <div id="map"></div>
    </section>

    <script>
      const lat = "<%=result.location.lat%>";
      const lng = "<%=result.location.lng%>";
      const badRequest = "<%=result.badrequest%>";
      if (badRequest) {
        alert("please enter a valid ip address");
      }
      var map = L.map("map", {
        center: [lat, lng],
        zoom: 13,
        zoomControl: false,
        doubleClickZoom: true,
      });
      L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
        maxZoom: 19,
        attribution:
          '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      }).addTo(map);
      var marker = L.marker([51.5, -1.09]).addTo(map);
    </script>
  </body>
</html>
